# Бізнес-правила - Етап отримання заявки

## Огляд
Етап отримання заявки ініціює процес сертифікації клієнта. Цей етап захоплює початкову інформацію про клієнта, перевіряє базові вимоги та запускає формальний процес перевірки.

## Контекст домену
- **Тип етапу**: Початкова точка входу
- **Актори**: Клієнт (зовнішній), адміністративний персонал ОВС, система
- **Посилання на ISO 17021**: Пункт 9.1.1 - Заявка на сертифікацію

## Бізнес-правила

### БП-ОЗ-001: Канал подання заявки
**Правило**: Заявки ПОВИННІ прийматися лише через затверджені канали
- **Дозволені канали**: 
  - Подання через веб-портал
  - Електронна пошта зі структурованим додатком форми
  - Ручне введення персоналом ОВС (для паперових/факсових заявок)
- **Обмеження**: Кожна заявка ПОВИННА мати задокументоване джерело подання
- **Обґрунтування**: Забезпечує простежуваність та відповідність вимогам ISO 17021

### БП-ОЗ-002: Обов'язкова інформація заявки
**Правило**: Заявка ПОВИННА містити мінімальну необхідну інформацію для прийняття
- **Обов'язкові поля**:
  - Назва юридичної особи
  - Основна контактна інформація (ім'я, електронна пошта, телефон)
  - Фізична адреса(и) об'єкта(ів) для сертифікації
  - Запитуваний(і) стандарт(и) сертифікації (ISO 9001, 14001 або 45001)
  - Сфера сертифікації (опис діяльності)
  - Кількість співробітників (для розрахунку тривалості аудиту)
  - Бажаний часовий план сертифікації
- **Валідація**: Система ПОВИННА відхиляти неповні заявки
- **Обґрунтування**: ISO 17021 Пункт 9.1.1 вимагає достатньої інформації для планування

### БП-ОЗ-003: Унікальний ідентифікатор заявки
**Правило**: Кожна заявка ПОВИННА отримати унікальний ідентифікатор при отриманні
- **Формат**: ЗЯВ-РРРР-ННННН (наприклад, ЗЯВ-2025-00001)
- **Обмеження**: Ідентифікатор ПОВИНЕН бути незмінним після призначення
- **Генерація**: Генерується системою, послідовно в межах року
- **Обґрунтування**: Дозволяє відстежування протягом життєвого циклу сертифікації

### БП-ОЗ-004: Виявлення дублікатів заявок
**Правило**: Система ПОВИННА виявляти потенційні дублікати заявок
- **Критерії виявлення**:
  - Однакова назва юридичної особи ТА
  - Однаковий стандарт сертифікації ТА
  - Дата заявки в межах 90 днів
- **Дія**: Позначити для ручної перевірки, не відхиляти автоматично
- **Обґрунтування**: Запобігає конфліктам обробки та марнуванню ресурсів

### БП-ОЗ-005: Часова мітка заявки
**Правило**: Отримання заявки ПОВИННО бути відмічене часовою міткою серверного часу
- **Точність**: Дата та час до секунд (РРРР-ММ-ДД ГГ:ХХ:СС)
- **Часовий пояс**: UTC з окремо збереженим місцевим часовим поясом
- **Незмінність**: Часова мітка не може бути змінена після створення
- **Обґрунтування**: Встановлює офіційну дату отримання для відстеження SLA

### БП-ОЗ-006: Обробка багатооб'єктних заявок
**Правило**: Заявки на кілька об'єктів ПОВИННІ ідентифікувати центральну функцію
- **Вимога**: Призначити один об'єкт як "Центральний офіс"
- **Валідація**: Принаймні один об'єкт повинен бути позначений як центральний
- **Обмеження**: Центральний офіс не може бути змінений без нової заявки
- **Обґрунтування**: ISO 17021 Додаток A вимагає ідентифікації центральної функції

### БП-ОЗ-007: Багатостандартна заявка
**Правило**: Одна заявка МОЖЕ запитувати кілька стандартів сертифікації
- **Дозволені комбінації**: 
  - ISO 9001 + ISO 14001
  - ISO 9001 + ISO 45001
  - ISO 14001 + ISO 45001
  - Всі три стандарти
- **Обмеження**: Кожен стандарт вимагає окремого опису сфери
- **Обґрунтування**: Дозволяє інтегровані аудити зберігаючи цілісність стандартів

### БП-ОЗ-008: Ініціалізація статусу заявки
**Правило**: Нові заявки ПОВИННІ бути ініціалізовані зі статусом "Отримано"
- **Початковий статус**: "Отримано"
- **Дозволені переходи**: "Отримано" → "На розгляді" тільки
- **Тригер**: Зміна статусу вимагає призначення рецензента
- **Обґрунтування**: Забезпечує належне ініціювання робочого процесу

### БП-ОЗ-009: Класифікація конфіденційності
**Правило**: Всі дані заявки ПОВИННІ бути класифіковані як конфіденційні
- **Класифікація за замовчуванням**: "Конфіденційно - Дані клієнта"
- **Контроль доступу**: На основі ролей (мінімум: адміністративний персонал)
- **Зберігання**: Мінімум 3 цикли сертифікації (9 років)
- **Обґрунтування**: ISO 17021 Пункт 8.4 вимоги конфіденційності

### БП-ОЗ-010: Підтвердження отримання заявки
**Правило**: Система ПОВИННА генерувати автоматичне підтвердження отримання
- **Час**: Протягом 5 хвилин після успішного подання
- **Зміст**: 
  - ID заявки
  - Часова мітка отримання
  - Інформація про наступні кроки
  - Очікуваний часовий план
- **Доставка**: Електронна пошта на основний контакт
- **Обґрунтування**: Професійне обслуговування та встановлення очікувань

### БП-ОЗ-011: Валідація опису сфери
**Правило**: Опис сфери сертифікації ПОВИНЕН бути змістовним
- **Мінімальна довжина**: 50 символів
- **Заборонений зміст**: 
  - Загальні описи (наприклад, "вся діяльність")
  - Виключення без обґрунтування
- **Мова**: Тільки англійська (обмеження MVP)
- **Обґрунтування**: Чітке визначення сфери критично для планування аудиту

### БП-ОЗ-012: Валідація кількості співробітників
**Правило**: Кількість співробітників ПОВИННА бути надана для розрахунку тривалості аудиту
- **Необхідна деталізація**:
  - Штатні співробітники
  - Співробітники на неповний день (з конвертацією FTE)
  - Підрядники в межах сфери
  - Змінні графіки (якщо застосовно)
- **Валідація**: Загальна кількість повинна бути > 0
- **Обґрунтування**: ISO 17021 Додаток B вимоги тривалості аудиту

### БП-ОЗ-013: Історія попередньої сертифікації
**Правило**: Заявка ПОВИННА захоплювати інформацію про попередню сертифікацію
- **Необхідно якщо застосовно**:
  - Назва попередньої ОВС
  - Номер сертифіката
  - Дата закінчення терміну дії
  - Причина зміни
- **Валідація**: Якщо передача, дата закінчення повинна бути майбутньою
- **Обґрунтування**: Правила передачі згідно IAF MD 2

### БП-ОЗ-014: Атрибуція джерела заявки
**Правило**: Система ПОВИННА відстежувати джерело заявки для аналітики
- **Категорії**:
  - Пряме (веб-сайт)
  - Направлення (з джерелом)
  - Передача від іншої ОВС
  - Клієнт що повертається
- **Вимога**: Обов'язкове поле, без null значень
- **Обґрунтування**: Бізнес-аналітика та ефективність маркетингу

### БП-ОЗ-015: Перевірка повноти даних
**Правило**: Система ПОВИННА розраховувати відсоток повноти заявки
- **Розрахунок**: (Заповнені поля / Загальна кількість полів) × 100
- **Поріг**: 100% для обов'язкових полів для продовження
- **Відображення**: Показувати індикатор прогресу під час подання
- **Обґрунтування**: Покращує якість даних та користувацький досвід

## Переходи станів

### Дійсні переходи станів
- **Створено** → **Отримано** (при успішному поданні)
- **Отримано** → **На розгляді** (при призначенні)
- **Отримано** → **Відкликано** (за ініціативою клієнта)

### Інваріанти станів
- Заявка в стані "Отримано" ПОВИННА мати:
  - Унікальний ідентифікатор
  - Повні обов'язкові поля
  - Часову мітку отримання
  - Класифікацію конфіденційності

## Точки інтеграції

### Вхідні
- Публічний веб-сайт (форма заявки)
- Система електронної пошти (для додатків)

### Вихідні
- Процес розгляду заявки
- База даних клієнтів
- Система управління документами
- Служба сповіщень

## Вимоги до аудиторського сліду

### Відстежувані події
- Заявка створена
- Поля змінені (якщо дозволено)
- Зміни статусу
- Журнал доступу (хто переглядав/редагував)

### Зберігання
- Всі журнали аудиту: мінімум 9 років
- Архівовано після 3 циклів сертифікації

## Обмеження продуктивності

- Подання заявки: < 30 секунд
- Перевірка дублікатів: < 2 секунд
- Електронне підтвердження: < 5 хвилин
- Валідація полів: Реальний час (< 500мс)

## Обробка помилок

### БП-ОЗ-ПОМ-001: Неповне подання
- **Умова**: Відсутні обов'язкові поля
- **Відповідь**: Виділити відсутні поля, запобігти поданню
- **Повідомлення користувача**: Чітке вказання необхідної інформації

### БП-ОЗ-ПОМ-002: Недоступність системи
- **Умова**: Збій бази даних або служби
- **Відповідь**: Поставити в чергу подання, обробити коли буде доступно
- **Повідомлення користувача**: "Заявка отримана, підтвердження очікується"

### БП-ОЗ-ПОМ-003: Виявлення дублікату
- **Умова**: Знайдено потенційний дублікат
- **Відповідь**: Прийняти але позначити для перевірки
- **Повідомлення користувача**: Стандартне підтвердження (без згадки дублікату)

## Міркування безпеки

- Вся передача даних ПОВИННА використовувати TLS 1.2+
- Завантажені файли скануються на шкідливе ПЗ
- Очищення введення для всіх текстових полів
- Обмеження швидкості: Максимум 10 заявок на IP на годину

## Обмеження MVP

- Тільки англійська мова
- Одна валюта (USD)
- Тільки три стандарти (ISO 9001, 14001, 45001)
- Без API інтеграції (тільки веб-форма)
- Без обробки платежів на цьому етапі

---

*Версія документа: 1.0*
*Останнє оновлення: 2025-05-31*
*Відповідність ISO 17021-1:2015 перевірено*